webpackJsonp([1],{NHnr:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("7+uW"),s={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},staticRenderFns:[]};var p=e("VU/8")({name:"App"},s,!1,function(t){e("vdAi")},null,null).exports,o=e("/ocq"),h=e("mvHQ"),n=e.n(h),l={name:"HelloWorld",data:function(){return{stateList:[],waitList:[],appDetail:{show:!1,tab:1,left:0,top:0,info:{appointNow:[],appointAfter:[],appointBefore:[]}},confirm:!1,isChange:!1,appNewShow:!1,appNewIndex:-1,appNewHeightNum:1,appNew:{height:0,width:0,top:0,left:0,startTime:"",endTime:"",timeBottom:0},mainInitHeight:0,type:"",isHold:!1,cellWidth:"",cellHeight:"",holdIndex:0,holdIndex2:0,holdIndexNew:0,offsetY:0,offsetX:0,originX:0,originY:0,originTop:0,nowDate:"",mydate:"",listPage:{pagesize:7,row:1,lastPage:1,total:0},workTime1:{start:"08:00",end:"12:00"},workTime2:{start:"12:00",end:"24:00"},workTimeNum:{am1:1,am2:0,pm1:0,pm2:0},holdInfo:{},liAppNum:0,tdNum:"",tableTime:[],dataList:[{name:"星期一",list:[]},{name:"星期二",list:[]},{name:"星期三",list:[{startTime:"08:45",endTime:"9:45",patientName:"张三"}]},{name:"星期四",list:[]},{name:"星期五",list:[{startTime:"08:15",endTime:"11:00",patientName:"张三"},{startTime:"08:45",endTime:"10:00",patientName:"张三"}]},{name:"星期六",list:[]},{name:"星期日",list:[]}],dataListCopy:[],appData:{appNum:[],appIndex:[],appTd:[],appList:[]},appDataCopy:{appNum:[],appIndex:[],appTd:[],appList:[]},timeSetInterval:"",timeLineTop:0,cancel:{show:!1,id:"",name:""},detailConfirm:{show:!1,id:"",name:""}}},created:function(){var t=this.workTime1.start,i=this.workTime2.end,e=t.split(":")[0],a=t.split(":")[1],s=i.split(":")[0],p=i.split(":")[1];this.tableTime=[];for(var o=Number(e);o<Number(s);o++)o<10?this.tableTime.push("0"+o):this.tableTime.push(""+o);this.tdNum=(60*(Number(s)-Number(e))+(Number(p)-Number(a)))/15;var h=this.workTime1.end,n=this.workTime2.start,l=h.split(":")[0],r=h.split(":")[1],m=n.split(":")[0],d=n.split(":")[1];this.workTimeNum.am2=(60*(Number(l)-Number(e))+(Number(r)-Number(a)))/15,this.workTimeNum.pm1=(60*(Number(m)-Number(e))+(Number(d)-Number(a)))/15,this.workTimeNum.pm2=this.tdNum},mounted:function(){this.$nextTick(function(){var t=this;document.getElementsByClassName("my-thead")[0].style.width=document.getElementsByClassName("my-tbody")[0].clientWidth+"px",document.getElementById("mytbodyCopy").style.height=document.getElementsByClassName("my-tbody")[0].scrollHeight+"px",this.mainInitHeight=document.getElementsByClassName("main")[0].clientHeight,this.cellWidth=parseFloat(window.getComputedStyle(document.getElementsByClassName("mytd")[0]).width),this.cellHeight=parseFloat(window.getComputedStyle(document.getElementsByClassName("mytd")[0]).height),this.appNew.width=this.cellWidth;var i=new Date,e=i.getHours(),a=i.getMinutes(),s=this.workTime1.start,p=s.split(":")[0],o=s.split(":")[1];if(60*e+a<60*Number(p)+Number(o))this.timeLineTop=0;else if(Number(e)>Number(this.workTime2.end.split(":")[0])||Number(e)==Number(this.workTime2.end.split(":")[0])&&Number(a)>=Number(this.workTime2.end.split(":")[1]))this.timeLineTop=document.getElementsByClassName("my-tbody")[0].scrollHeight;else{var h=12*(Number(e)-Number(p))+Math.ceil((Number(a)-Number(o))/5);this.timeLineTop=this.cellHeight*h/3,this.timeSetInterval=setInterval(function(){t.timeLineTop+=t.cellHeight/3},3e5)}this.dateNow()})},methods:{init:function(){this.appDetail.show=!1,this.appChange(!0)},appChange:function(t){var i=this;t&&(this.dataListCopy=JSON.parse(n()(this.dataList))),this.appDataCopy.appList=[],this.appDataCopy.appNum=[],this.appDataCopy.appTd=[],this.appDataCopy.appIndex=[],this.dataListCopy.forEach(function(t,e){for(var a=[],s=0;s<i.tdNum;s++)a.push(0);i.appDataCopy.appNum.push(a),t.list.forEach(function(t,a){i.appDataCopy.appNum[e].push({});for(var s=t.startTime,p=t.endTime,o=s.split(":")[0],h=s.split(":")[1],n=p.split(":")[0],l=p.split(":")[1],r=(60*(Number(n)-Number(o))+(Number(l)-Number(h)))/15,m=(60*(Number(o)-Number(i.workTime1.start.split(":")[0]))+(Number(h)-Number(i.workTime1.start.split(":")[1])))/15,d=m;d<r+m;d++)i.appDataCopy.appNum[e][d]+=1})}),this.dataListCopy.forEach(function(t,e){i.appDataCopy.appTd.push([]),i.appDataCopy.appIndex.push([]);for(var a=0,s=0;s<i.tdNum;s++)i.appDataCopy.appTd[e].push([]),i.appDataCopy.appIndex[e].push([]),a<i.appDataCopy.appNum[e][s]&&(a=i.appDataCopy.appNum[e][s]);if(i.liAppNum=a,a>0)for(var p=0;p<a;p++)for(var o=0;o<i.tdNum;o++)i.appDataCopy.appTd[e][o].push(-1)}),this.dataListCopy.forEach(function(t,e){i.appDataCopy.appList.push([]),t.list.forEach(function(t,a){i.appDataCopy.appList[e].push({});for(var s=t.startTime,p=t.endTime,o=s.split(":")[0],h=s.split(":")[1],n=p.split(":")[0],l=p.split(":")[1],r=(60*(Number(n)-Number(o))+(Number(l)-Number(h)))/15,m=(60*(Number(o)-Number(i.workTime1.start.split(":")[0]))+(Number(h)-Number(i.workTime1.start.split(":")[1])))/15,d=1,u=m;u<m+r;u++)d<i.appDataCopy.appNum[e][u]&&(d=i.appDataCopy.appNum[e][u]);for(var c=0,N=0;N<d;N++){for(var f=!1,y=m;y<m+r;y++)if(-1!=i.appDataCopy.appTd[e][y][N]){f=!0,c+=1;break}if(!f)break}i.appDataCopy.appList[e][a]={width:i.cellWidth/d-3,height:i.cellHeight*r,top:i.cellHeight*m,left:Number(i.cellWidth*e)+Number(i.cellWidth/d*c),zindex:9,info:i.dataListCopy[e].list[a]};for(var w=m;w<m+r;w++)i.appDataCopy.appTd[e][w][c]=1,i.appDataCopy.appIndex[e][w].push(a)})}),this.dataListCopy.forEach(function(t,e){t.list.forEach(function(t,a){for(var s=t.startTime,p=t.endTime,o=s.split(":")[0],h=s.split(":")[1],n=p.split(":")[0],l=p.split(":")[1],r=(60*(Number(n)-Number(o))+(Number(l)-Number(h)))/15,m=(60*(Number(o)-Number(i.workTime1.start.split(":")[0]))+(Number(h)-Number(i.workTime1.start.split(":")[1])))/15,d=m;d<m+r;d++)for(var u=0;u<i.appDataCopy.appIndex[e][d].length;u++){var c=i.appDataCopy.appIndex[e][d][u],N=i.appDataCopy.appList[e][a].width,f=i.appDataCopy.appList[e][a].left,y=i.appDataCopy.appList[e][c].left;f<y&&N+f>y&&(i.appDataCopy.appList[e][a].width=y-f-3)}})}),this.appData=JSON.parse(n()(this.appDataCopy))},addView:function(t,i){var e=Number(t.time.split(":")[0]),a=Number(t.time.split(":")[1]);e+=parseInt(t.num/4),(a+=t.num%4*15)>=60?(e+=parseInt(a/60),0==(a=Number(a%60))&&(a="00")):0==a&&(a="00"),e<10&&(e="0"+e);var s=e+":"+a,p={startTime:t.time,endTime:s,patientName:"张三"};this.dataList[t.liIndex].list.push(p),this.appChange(!0)},body_mousedown:function(t){},body_mousemove:function(t){var i=t.clientX,e=t.clientY,a=this.holdIndex,s=this.holdIndex2;if(this.appNewShow=!1,this.isHold){if("title"==this.type){this.appDataCopy.appList[a][s].zindex=19;var p=this.cellWidth,o=Math.floor((i-this.originX)/p)*p,h=this.appData.appList[a][s].left+o;h>=0&&h<=p*(this.dataList.length-1)&&(this.appDataCopy.appList[a][s].left=h,this.holdIndexNew=parseInt((this.appDataCopy.appList[a][s].left+this.dataList.length)/p));var n=this.cellHeight,l=Math.floor((e-this.originY)/n)*n;if(this.appData.appList[a][s].top+l>=0&&this.appData.appList[a][s].top+l<=parseFloat(document.getElementsByClassName("my-tbody")[0].scrollHeight)-this.appData.appList[a][s].height){this.appDataCopy.appList[a][s].top=this.appData.appList[a][s].top+l;var r=parseInt(this.appDataCopy.appList[a][s].top/n),m=parseInt(r/4),d=Number(r%4*15),u=this.workTime1.start,c=u.split(":")[0],N=u.split(":")[1],f=Number(c)+Number(m),y=Number(N)+Number(d);y>=60?(f+=parseInt(y/60),0==(y=Number(y%60))&&(y="00")):0==y&&(y="00"),f<10&&(f="0"+f),this.dataListCopy[a].list[s].startTime=f+":"+y;var w=parseInt((this.appDataCopy.appList[a][s].height+1)/n),v=parseInt(w/4),C=Number(w%4*15),b=Number(f)+Number(v),g=Number(y)+Number(C);g>=60?(b+=parseInt(g/60),0==(g%=60)&&(g="00")):0==g&&(g="00"),b<10&&(b="0"+b),this.dataListCopy[a].list[s].endTime=b+":"+g}}if("footline"==this.type){this.appDataCopy.appList[a][s].zindex=19;var D=t.clientY-this.originY+this.appData.appList[a][s].height;D<parseFloat(document.getElementsByClassName("my-tbody")[0].scrollHeight)-this.appDataCopy.appList[a][s].top&&(this.appDataCopy.appList[a][s].height=D)}if("add"==this.type&&Math.abs(t.clientY-this.originY)>10){var L=this.cellWidth;if(this.appNewIndex=Math.floor(this.offsetX/L),this.appNewIndex>this.dataList.length-1);else{this.appNewShow=!0,this.appNew.left=Math.floor(this.offsetX/L)*L;var _=this.cellHeight;this.appNew.top=Math.floor(this.offsetY/_)*_,Math.ceil((e-this.originY)/_)<=1?(this.appNew.height=_,this.appNewHeightNum=1,this.appNew.timeBottom=-20):(this.appNew.height=Math.ceil((e-this.originY)/_)*_,this.appNewHeightNum=Math.ceil((e-this.originY)/_),this.appNew.timeBottom=0);var x=parseInt(this.appNew.top/_),T=parseInt(x/4),I=Number(x%4*15),H=this.workTime1.start,k=H.split(":")[0],S=H.split(":")[1],E=Number(k)+Number(T),Y=Number(S)+Number(I);Y>=60?(E+=parseInt(Y/60),0==(Y=Number(Y%60))&&(Y="00")):0==Y&&(Y="00"),E<10&&(E="0"+E),this.appNew.startTime=E+":"+Y;var B=this.appNewHeightNum,M=parseInt(B/4),W=Number(B%4*15),X=Number(E)+Number(M),J=Number(Y)+Number(W);J>=60?(X+=parseInt(J/60),0==(J%=60)&&(J="00")):0==J&&(J="00"),X<10&&(X="0"+X),this.appNew.endTime=X+":"+J}}}},body_mouseup:function(t){var i=this.holdIndex,e=this.holdIndex2;this.isHold=!1;var a=!1;if("title"!=this.type&&"footline"!=this.type||(this.appDataCopy.appList[i][e].zindex=9,this.appDataCopy.appList[i][e].height==this.appData.appList[i][e].height&&this.appDataCopy.appList[i][e].top==this.appData.appList[i][e].top&&this.appDataCopy.appList[i][e].left==this.appData.appList[i][e].left||(this.confirm=!0,a=!0)),"footline"==this.type){var s=this.appDataCopy.appList[i][e].height;Math.ceil(s/this.cellHeight)*this.cellHeight<=parseFloat(document.getElementsByClassName("my-tbody")[0].scrollHeight)-this.appDataCopy.appList[i][e].top?this.appDataCopy.appList[i][e].height=Math.ceil(s/this.cellHeight)*this.cellHeight:this.appDataCopy.appList[i][e].height=(Math.ceil(s/this.cellHeight)-1)*this.cellHeight;var p=parseInt(this.appDataCopy.appList[i][e].height/this.cellHeight),o=parseInt(p/4),h=p%4*15,l=this.dataListCopy[i].list[e].startTime,r=l.split(":")[0],m=l.split(":")[1],d=Number(r)+o,u=Number(m)+h;u>=60?(d+=parseInt(u/60),0==(u=Number(u%60))&&(u="00")):0==u&&(u="00"),d<10&&(d="0"+d),this.dataListCopy[i].list[e].endTime=d+":"+u,this.holdInfo=JSON.parse(n()(this.dataListCopy[i].list[e]))}if("title"==this.type&&(this.holdInfo=JSON.parse(n()(this.dataListCopy[i].list[e])),this.holdIndexNew!=i)){var c=this.appDataCopy.appList[i][e],N=this.dataListCopy[i].list[e];if(this.appDataCopy.appList[i].splice(e,1),this.dataListCopy[i].list.splice(e,1),0==this.dataListCopy[this.holdIndexNew].list.length)this.appDataCopy.appList[this.holdIndexNew].push(c),this.dataListCopy[this.holdIndexNew].list.push(N);else for(var f=N.startTime,y=60*Number(f.split(":")[0])+Number(f.split(":")[1]),w=0;w<this.dataListCopy[this.holdIndexNew].list.length;w++){var v=this.dataListCopy[this.holdIndexNew].list[w].startTime;if(y<60*Number(v.split(":")[0])+Number(v.split(":")[1])){this.appDataCopy.appList[this.holdIndexNew].splice(w,0,c),this.dataListCopy[this.holdIndexNew].list.splice(w,0,N);break}if(w==this.dataListCopy[this.holdIndexNew].list.length-1){this.appDataCopy.appList[this.holdIndexNew].push(c),this.dataListCopy[this.holdIndexNew].list.push(N);break}}}if("add"==this.type&&this.appNewShow){var C={id:"",date:this.mydate,time:this.appNew.startTime,num:this.appNewHeightNum,liIndex:this.appNewIndex};this.addView(C,"add")}a&&(this.appChange(),this.appDetail.show=!1),this.type="",window.event?window.event.cancelBubble=!0:t.stopPropagation()},add_mousedown:function(t){this.isHold=!0,this.type="add",this.offsetX=t.offsetX,this.offsetY=t.offsetY,this.originX=t.clientX,this.originY=t.clientY,this.appDetail.show=!1},box_mousedown:function(t){this.isChange=!1,window.event?window.event.cancelBubble=!0:t.stopPropagation()},detail_mousedown:function(t){this.appDetail.show=!0,this.appDetail.tab=1,window.event?window.event.cancelBubble=!0:t.stopPropagation()},box_mouseup:function(t,i,e){this.holdIndex=t,this.holdIndex2=i,this.appDetail.show=!0,this.appDetail.tab=1,this.appDetail.left=t>3?this.appData.appList[t][i].left-265:this.appData.appList[t][i].left+this.cellWidth+80,e.clientY>350?this.appDetail.top=e.clientY-350:this.appDetail.top=0,this.appDetail.info=this.dataList[t].list[i]},title_mousedown:function(t,i,e){this.appDetail.show=!1,this.isHold=!0,this.appDataCopy=JSON.parse(n()(this.appData)),this.dataListCopy=JSON.parse(n()(this.dataList)),this.type="title",this.holdIndex=t,this.holdIndex2=i,this.holdIndexNew=t,this.originX=e.clientX,this.originY=e.clientY},footline_mousedown:function(t,i,e){this.appDetail.show=!1,this.isHold=!0,this.appDataCopy=JSON.parse(n()(this.appData)),this.dataListCopy=JSON.parse(n()(this.dataList)),this.type="footline",this.holdIndex=t,this.holdIndex2=i,this.originY=e.clientY},cancel_confirm:function(){this.appDataCopy=JSON.parse(n()(this.appData)),this.dataListCopy=JSON.parse(n()(this.dataList)),this.confirm=!1,this.appChange()},save_confirm:function(){this.appData=JSON.parse(n()(this.appDataCopy)),this.dataList=JSON.parse(n()(this.dataListCopy)),this.confirm=!1,this.appChange(!0)},dateNow:function(){var t=new Date,i=t.getFullYear(),e=t.getMonth()+1,a=t.getDate();e<10&&(e="0"+e),a<10&&(a="0"+a),this.mydate=i+"-"+e+"-"+a,this.nowDate=new Date(this.mydate).getTime(),this.init()},waitDetail:function(t,i){this.appDetail.show=!0,this.appDetail.tab=1,this.appDetail.left=document.getElementsByClassName("my-table")[0].clientWidth-325,this.appDetail.top=i.clientY-200,this.appDetail.top<0&&(this.appDetail.top=0),this.appDetail.info=t,window.event?window.event.cancelBubble=!0:i.stopPropagation()},closeAppdetail:function(){this.appDetail.show&&(this.appDetail.show=!1)},detail_edit:function(){var t={id:this.appDetail.info.id,date:this.mydate,time:this.appNew.startTime,num:this.appNewHeightNum};this.$refs.viewAdd.addShow(t,"edit")},myCellBoxScroll:function(){this.appDetail.show=!1}},beforeDestroy:function(){clearInterval(this.timeSetInterval),this.timeSetInterval=null}},r={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.confirm,expression:"confirm"}],staticClass:"tip-box"},[e("div",{staticClass:"tip"},[e("p",[t._v("确定修改信息")]),t._v(" "),e("div",{staticClass:"tip-btn",on:{click:t.cancel_confirm}},[t._v("取消")]),t._v(" "),e("div",{staticClass:"tip-btn",staticStyle:{"margin-left":"10px",background:"#8FC4FE",color:"#fff"},on:{click:t.save_confirm}},[t._v("确认")])])]),t._v(" "),e("div",{staticClass:"main"},[e("div",{staticClass:"body clearfix",attrs:{id:"body"},on:{mousedown:t.body_mousedown,mousemove:t.body_mousemove,mouseup:t.body_mouseup}},[e("div",{staticClass:"my-table"},[e("div",{staticClass:"my-thead"},[e("div",{staticClass:"my-thead-left"},[t._v("\n            时间\n          ")]),t._v(" "),e("ul",{staticClass:"clearfix"},t._l(t.dataList,function(i,a){return e("li",{key:a},[t._v(t._s(i.name))])}),0)]),t._v(" "),e("div",{staticClass:"my-tbody",on:{scroll:t.myCellBoxScroll}},[t._l(t.tableTime,function(i,a){return e("div",{key:a,staticClass:"my-tr clearfix"},[e("div",{staticClass:"my-hour"},[t._v(t._s(i))]),t._v(" "),t._m(0,!0),t._v(" "),e("div",{staticClass:"my-cell-box clearfix"},t._l(t.dataList,function(i,s){return e("div",{key:a+"-"+s,staticClass:"my-cell-lie"},[t._m(1,!0)])}),0)])}),t._v(" "),e("div",{staticClass:"my-tbody-copy",attrs:{id:"mytbodyCopy"},on:{mousedown:t.add_mousedown}},[t.appNewShow?e("div",{staticClass:"app-new",style:"width:"+t.appNew.width+"px;height:"+t.appNew.height+"px;top:"+t.appNew.top+"px;left:"+t.appNew.left+"px;"},[e("p",[t._v("新建预约")]),t._v(" "),e("div",{staticClass:"app-new-time",style:"bottom:"+t.appNew.timeBottom+"px"},[t._v(t._s(t.appNew.startTime)+" - "+t._s(t.appNew.endTime))])]):t._e(),t._v(" "),t._l(t.appDataCopy.appList,function(i,a){return t._l(i,function(i,s){return e("div",{key:a+"-"+s,ref:"cho",refInFor:!0,staticClass:"chooser",style:"width:"+i.width+"px;height:"+i.height+"px;top:"+i.top+"px;left:"+i.left+"px;z-index:"+i.zindex+";",on:{mousedown:t.box_mousedown,mouseup:function(i){return t.box_mouseup(a,s,i)}}},[e("div",{staticClass:"title",on:{mousedown:function(i){return t.title_mousedown(a,s,i)}}},[t._v(t._s(i.info.patientName))]),t._v(" "),e("div",{staticClass:"content"},[t._v("\n                  "+t._s(i.info.appointProject)+"\n                  "),e("div",{staticClass:"content-time"},[t._v(t._s(i.info.startTime)+" - "+t._s(i.info.endTime))])]),t._v(" "),e("div",{staticClass:"footline",on:{mousedown:function(i){return t.footline_mousedown(a,s,i)}}})])})}),t._v(" "),e("div",{staticClass:"my-time-line",style:"top:"+t.timeLineTop+"px"})],2)],2)])])])])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"my-minute-box"},[i("div",{staticClass:"my-minute"},[this._v("00")]),this._v(" "),i("div",{staticClass:"my-minute"},[this._v("15")]),this._v(" "),i("div",{staticClass:"my-minute"},[this._v("30")]),this._v(" "),i("div",{staticClass:"my-minute"},[this._v("45")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("ul",[i("li",{staticClass:"mytd"}),this._v(" "),i("li"),this._v(" "),i("li"),this._v(" "),i("li")])}]};var m=e("VU/8")(l,r,!1,function(t){e("uXMf")},"data-v-ed1233f6",null).exports;a.a.use(o.a);var d=new o.a({routes:[{path:"/",name:"HelloWorld",component:m}]});a.a.config.productionTip=!1,new a.a({el:"#app",router:d,components:{App:p},template:"<App/>"})},uXMf:function(t,i){},vdAi:function(t,i){}},["NHnr"]);
//# sourceMappingURL=app.7b03fd92bbf9354cb66e.js.map